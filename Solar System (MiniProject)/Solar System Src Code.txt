#include <conio.h>
#include <dos.h>
#include <graphics.h>
#include <math.h>
#include <stdio.h>

#define ScreenWidth getmaxx()
#define ScreenHeight getmaxy()
#define GroundY ScreenHeight * 0.75

int x = 500;
int ldisp = 0;

void planetMotion(int xrad, int yrad, int midx, int midy, int x[70], int y[70])
{
    int i, j = 0;

    for (i = 360; i > 0; i = i - 6) {
	x[j] = midx - (xrad * cos((i * 3.14) / 180));
	y[j++] = midy - (yrad * sin((i * 3.14) / 180));
    }
    return;
}

int main()
{
    int gdriver = DETECT, gmode, err;
    int i = 0, midx, midy;
    int xrad[9], yrad[9], x[9][70], y[9][70];
    int pos[9], planet[9], tmp;

    initgraph(&gdriver, &gmode, "C:\\Turboc3\\BGI");
    err = graphresult();

    if (err != grOk) {
	printf("Graphics Error: %s", grapherrormsg(err));
	return 0;
    }

    // Use center of screen with margin
    midx = getmaxx() / 2;
    midy = getmaxy() / 2;

    // Adjust if still clipping
    if (midx > 300) midx = 300;
    if (midy > 200) midy = 200;

    planet[0] = 6;  // Smaller planets
    for (i = 1; i < 9; i++) {
	planet[i] = planet[i - 1] + 1;
    }
    // Make Pluto specifically smaller
    planet[8] = 4;  // Changed from 14 to 4 - much smaller!

    for (i = 0; i < 9; i++) {
	pos[i] = i * 6;
    }

    // Reduced orbit sizes
    xrad[0] = 40, yrad[0] = 25;
    for (i = 1; i < 9; i++) {
	xrad[i] = xrad[i - 1] + 20;
	yrad[i] = yrad[i - 1] + 12;
    }

    for (i = 0; i < 9; i++) {
	planetMotion(xrad[i], yrad[i], midx, midy, x[i], y[i]);
    }

    while (!kbhit()) {
	// Drawing 9 orbits
	setcolor(WHITE);
	for (i = 0; i < 9; i++) {
	    setcolor(CYAN);
	    ellipse(midx, midy, 0, 360, xrad[i], yrad[i]);
	}

	// Sun at the center
	setcolor(YELLOW);
	setfillstyle(SOLID_FILL, YELLOW);
	circle(midx, midy, 20);  // Smaller sun
	floodfill(midx, midy, YELLOW);

	// Planets with adjusted positions
	setcolor(DARKGRAY);
	setfillstyle(SOLID_FILL, DARKGRAY);
	outtextxy(x[0][pos[0]], y[0][pos[0]], "  MERCURY");
	pieslice(x[0][pos[0]], y[0][pos[0]], 0, 360, planet[0]);

	setcolor(BROWN);
	setfillstyle(SOLID_FILL, BROWN);
	outtextxy(x[1][pos[1]], y[1][pos[1]], "  VENUS");
	pieslice(x[1][pos[1]], y[1][pos[1]], 0, 360, planet[1]);

	setcolor(GREEN);
	setfillstyle(SOLID_FILL, GREEN);
	outtextxy(x[2][pos[2]], y[2][pos[2]], "   EARTH");
	pieslice(x[2][pos[2]], y[2][pos[2]], 0, 360, planet[2]);

	setcolor(RED);
	setfillstyle(SOLID_FILL, RED);
	outtextxy(x[3][pos[3]], y[3][pos[3]], "   MARS");
	pieslice(x[3][pos[3]], y[3][pos[3]], 0, 360, planet[3]);

	setcolor(BROWN);
	setfillstyle(SOLID_FILL, BROWN);
	outtextxy(x[4][pos[4]], y[4][pos[4]], "   JUPITER");
	pieslice(x[4][pos[4]], y[4][pos[4]], 0, 360, planet[4]);

	// Saturn with ring effect - FIXED
	setcolor(LIGHTGRAY);
	setfillstyle(SOLID_FILL, LIGHTGRAY);  // Changed back to LIGHTGRAY for ring effect
	outtextxy(x[5][pos[5]], y[5][pos[5]], "   SATURN");
	pieslice(x[5][pos[5]], y[5][pos[5]], 0, 360, planet[5]);

	setcolor(LIGHTCYAN);
	setfillstyle(SOLID_FILL, LIGHTCYAN);
	outtextxy(x[6][pos[6]], y[6][pos[6]], "   URANUS");
	pieslice(x[6][pos[6]], y[6][pos[6]], 0, 360, planet[6]);

	setcolor(BLUE);
	setfillstyle(SOLID_FILL, BLUE);
	outtextxy(x[7][pos[7]], y[7][pos[7]], "   NEPTUNE");
	pieslice(x[7][pos[7]], y[7][pos[7]], 0, 360, planet[7]);

	setcolor(LIGHTRED);
	setfillstyle(SOLID_FILL, LIGHTRED);
	outtextxy(x[8][pos[8]], y[8][pos[8]], " PLUTO");
	pieslice(x[8][pos[8]], y[8][pos[8]], 0, 360, planet[8]);

	for (i = 0; i < 9; i++) {
	    if (pos[i] <= 0) {
		pos[i] = 59;
	    } else {
		pos[i] = pos[i] - 1;
	    }
	}
    
	outtextxy(10, 10, "Aryan's own Matrix -Press any key to exit");
	delay(100);
	cleardevice();
    }

    getch();
    closegraph();
    return 0;
}