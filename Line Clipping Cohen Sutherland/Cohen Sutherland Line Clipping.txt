#include <graphics.h>
#include <conio.h>
#include <stdio.h>
#define INSIDE 0 // 0000
#define LEFT 1 // 0001
#define RIGHT 2 // 0010
#define BOTTOM 4 // 0100
#define TOP 8 // 1000
int xmin, ymin, xmax, ymax;
// Function to compute region code
int computeCode(int x, int y) {
 int code = INSIDE;
 if (x < xmin) code |= LEFT;
 else if (x > xmax) code |= RIGHT;
 if (y < ymin) code |= BOTTOM;
 else if (y > ymax) code |= TOP;
 return code;
}
// Cohen-Sutherland line clipping algorithm
void cohenSutherlandClip(int x1, int y1, int x2,
int y2) {
 int code1 = computeCode(x1, y1);
 int code2 = computeCode(x2, y2);
 int accept = 0;
 while (1) {
 if ((code1 == 0) && (code2 == 0)) {
 // Trivial Accept
 accept = 1;
 break;
 } else if (code1 & code2) {
 // Trivial Reject
 break;
 } else {
 int code_out;
 int x, y;
 // At least one endpoint is outside
 if (code1 != 0)
 code_out = code1;
 else
 code_out = code2;
 if (code_out & TOP) {
x = x1 + (x2 - x1) * (ymax - y1) / (y2 - y1);
 y = ymax;
 } else if (code_out & BOTTOM) {
x = x1 + (x2 - x1) * (ymin - y1) / (y2 - y1);
 y = ymin;
 } else if (code_out & RIGHT) {
y = y1 + (y2 - y1) * (xmax - x1) / (x2 - x1);
 x = xmax;
 } else if (code_out & LEFT) {
y = y1 + (y2 - y1) * (xmin - x1) / (x2 - x1);
 x = xmin;
 }
 if (code_out == code1) {
 x1 = x;
 y1 = y;
 code1 = computeCode(x1, y1);
 } else {
 x2 = x;
 y2 = y;
 code2 = computeCode(x2, y2);
 }
 }
 }
 cleardevice();
 // Draw window
 rectangle(xmin, ymin, xmax, ymax);
 if (accept) {
 setcolor(GREEN);
 line(x1, y1, x2, y2);
outtextxy(10, 10, "Line Accepted and Drawn (Clipped)");
 } else {
 setcolor(RED);
 outtextxy(10, 10, "Line Rejected");
 }
}
void main() {
 int gd = DETECT, gm;
 int x1, y1, x2, y2;
 initgraph(&gd, &gm, "C:\\Turboc3\\BGI");
 // Define window
 xmin = 100; ymin = 100;
 xmax = 300; ymax = 200;
 // Input line endpoints
 printf("Enter line coordinates (x1 y1 x2 y2): ");
 scanf("%d %d %d %d", &x1, &y1, &x2, &y2);
 // Draw original line
 rectangle(xmin, ymin, xmax, ymax);
 setcolor(WHITE);
 line(x1, y1, x2, y2);
 outtextxy(10, 10, "Original Line");
 getch();
 // Apply clipping
 cohenSutherlandClip(x1, y1, x2, y2);
 getch();
 closegraph();
}

/*
input : 50,150,250,250 
*/